<!DOCTYPE html>
<html>
<head>
<title>AI Call Attender Demo</title>

<style>
body{
font-family:Arial;
background:#0f172a;
color:white;
text-align:center;
margin:40px 0;
}

.container{
max-width:560px;
margin:0 auto;
background:#1e293b;
padding:24px;
border-radius:10px;
}

label{
display:block;
text-align:left;
margin:10px 0 6px;
font-size:14px;
}

input,select,textarea{
padding:10px;
width:100%;
border-radius:6px;
border:1px solid #334155;
box-sizing:border-box;
}

textarea{
min-height:100px;
}

button{
margin-top:16px;
padding:12px;
width:100%;
background:#38bdf8;
border:none;
border-radius:6px;
cursor:pointer;
font-weight:bold;
}

#reply{
text-align:left;
margin-top:18px;
white-space:pre-wrap;
line-height:1.5;
}
</style>

</head>

<body>

<div class="container">
<h1>ðŸ“ž AI Call Attender</h1>
<p>Complete all fields to simulate an end-to-end call intake.</p>

<label for="caller_name">Caller Name</label>
<input id="caller_name" placeholder="Jane Doe" required>

<label for="phone_number">Phone Number</label>
<input id="phone_number" placeholder="+1 555-123-4567" required>

<label for="email">Email</label>
<input id="email" type="email" placeholder="jane@company.com" required>

<label for="organization">Organization</label>
<input id="organization" placeholder="City General Hospital" required>

<label for="use_case">Use Case</label>
<select id="use_case" required>
<option value="">Select use case</option>
<option>Hospital</option>
<option>College</option>
<option>Government Office</option>
<option>Startup</option>
<option>Other</option>
</select>

<label for="preferred_callback_time">Preferred Callback Time</label>
<input id="preferred_callback_time" placeholder="Weekdays 3:00 PM - 5:00 PM" required>

<label for="message">Caller Message</label>
<textarea id="message" placeholder="I need help scheduling an appointment for next week." required></textarea>

<button onclick="callAI()">Submit Call Request</button>

<h3 id="reply"></h3>
</div>

<script>

async function callAI(){

let payload={
caller_name:document.getElementById("caller_name").value,
phone_number:document.getElementById("phone_number").value,
email:document.getElementById("email").value,
organization:document.getElementById("organization").value,
use_case:document.getElementById("use_case").value,
preferred_callback_time:document.getElementById("preferred_callback_time").value,
message:document.getElementById("message").value
};

let missing = Object.values(payload).some(value => !value || value.trim() === "");
if(missing){
  document.getElementById("reply").innerText = "Please complete all fields before submitting.";
  return;
}

let res=await fetch(
"http://127.0.0.1:8000/call",
{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify(payload)
}
);

if(!res.ok){
  document.getElementById("reply").innerText = "Request failed. Please verify backend is running and inputs are valid.";
  return;
}

let data=await res.json();

document.getElementById("reply")
.innerText=`Status: ${data.status}\nAI Reply: ${data.ai_response}`;

}

</script>

</body>
</html>
